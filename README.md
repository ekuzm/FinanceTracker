# Finance Tracker

**Finance Tracker** — это приложение для управления личными финансами, которое помогает пользователям контролировать доходы и расходы, а также анализировать своё финансовое состояние. Система предоставляет REST API для работы с данными о пользователях, счетах, транзакциях, категориях и бюджетах, обеспечивая удобное и структурированное взаимодействие с финансовой информацией.

**Стек:** Java 21 · Spring Boot 4 · Spring Data JPA · PostgreSQL

---

## Связи сущностей

![ER diagram](./docs/ER-diagram.png)

---

## API Endpoints

Полная документация API находится: [Документация API](api.md)

## Транзакции, Entity Graph и Fetch Join

**Транзакции:** создание пользователя с несколькими счетами (`POST /api/v1/users/with-accounts`) можно выполнять в одной транзакции (`?transactional=true`) — при ошибке всё откатывается; без транзакции (`?transactional=false`) при сбое в БД остаётся частично сохранённые данные (демонстрация атомарности).

**Entity Graph:** для избежания N+1 при загрузке связей используются `@EntityGraph` в репозиториях: пользователи со счетами (`findAllWithAccounts`), бюджеты с категориями (`findAllWithCategories`), один бюджет/пользователь по id с нужными связями — один запрос вместо серии по каждому элементу.

**Fetch Join:** загрузка бюджетов вместе с транзакциями реализована через `LEFT JOIN FETCH` (`findAllWithTransactions`). Вызов: `GET /api/v1/budgets?withTransactions=true` — бюджеты и их транзакции подтягиваются одним запросом, без N+1.
